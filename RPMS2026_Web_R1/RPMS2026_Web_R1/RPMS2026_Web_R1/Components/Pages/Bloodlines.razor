@page "/bloodlines"
@rendermode InteractiveServer

@using RPMS2026_Web_R1.Data
@using RPMS2026_Web_R1.DTOs
@using Syncfusion.Blazor.Data
@using Syncfusion.Blazor.Grids
@using Microsoft.EntityFrameworkCore
@inject Rpms2026WebContext DbContext

<PageTitle>Bloodlines</PageTitle>

<h1>Birds Bloodline</h1>
<p>This component demonstrates showing data.</p>
<h3>Bloodlines</h3>

@if (dataSource != null)
{
    <SfGrid DataSource="@dataSource" AllowPaging="true" AllowSorting="true">
        <GridPageSettings PageSize="12"></GridPageSettings>
        <GridColumns>
            <GridColumn Field="Id" HeaderText="ID" IsPrimaryKey="true" Width="100" TextAlign="TextAlign.Center"></GridColumn>
            <GridColumn Field="Code" HeaderText="Code" Width="150"></GridColumn>
            <GridColumn Field="Desc" HeaderText="Description" Width="200"></GridColumn>
        </GridColumns>
    </SfGrid>
}
else
{
    <p><em>Loading...</em></p>
}


@code {
    private List<BloodlineDTO>? dataSource;

    protected override async Task OnInitializedAsync()
    {
        dataSource = await DbContext.Bloodlines
            .Select(b => new BloodlineDTO
            {
                Id = b.Id,
                Code = b.Code,
                Desc = b.Desc
            })
            .ToListAsync();
    }
}
